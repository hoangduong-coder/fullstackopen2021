(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{41:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var c=t(2),r=t(17),a=t.n(r),o=t(8),i=t(3),u=t(4),s=t.n(u),d="/api/persons",j=function(){return s.a.get(d).then((function(e){return e.data}))},h=function(e){return s.a.post(d,e).then((function(e){return e.data}))},b=function(e){return s.a.delete("".concat(d,"/").concat(e)).then((function(e){return e.data}))},f=function(e,n){return s.a.put("".concat(d,"/").concat(e),n).then((function(e){return e.data}))},l=t(0),O=function(e){var n=e.kw,t=e.action;return Object(l.jsxs)("div",{children:[Object(l.jsx)("p",{children:"Filter shown with "}),Object(l.jsx)("input",{name:"keyword",value:n,onChange:t})]})},m=function(e){var n=e.onSubmit,t=e.name,c=e.phone,r=e.action;return Object(l.jsxs)("form",{onClick:n,children:[Object(l.jsxs)("div",{children:[Object(l.jsx)("p",{children:"Name: "}),Object(l.jsx)("input",{name:"name",value:t,onChange:r})]}),Object(l.jsxs)("div",{children:[Object(l.jsx)("p",{children:"Phone: "}),Object(l.jsx)("input",{name:"phone",value:c,onChange:r})]}),Object(l.jsx)("button",{type:"submit",children:"Add"})]})},p=function(e){var n=e.name,t=e.phone,c=e.del;return Object(l.jsxs)("div",{children:[Object(l.jsxs)("p",{children:[n,", ",t]}),Object(l.jsx)("button",{onClick:c,children:"Delete"})]})},v=function(e){var n=e.arr,t=e.handleDelete;return Object(l.jsx)("div",{children:n.map((function(e){return Object(l.jsx)(p,{name:e.name,phone:e.phone,del:function(){return t(e.id)}},e.id)}))})},x=function(e){var n=e.obj;return null===n.message?null:Object(l.jsx)("div",{className:n.type,children:n.message})},w=function(){var e=Object(c.useState)(""),n=Object(i.a)(e,2),t=n[0],r=n[1],a=Object(c.useState)(""),u=Object(i.a)(a,2),s=u[0],d=u[1],p=Object(c.useState)(""),w=Object(i.a)(p,2),k=w[0],g=w[1],y=Object(c.useState)(!1),S=Object(i.a)(y,2),C=S[0],D=S[1],N=Object(c.useState)([]),E=Object(i.a)(N,2),J=E[0],L=E[1],P=Object(c.useState)({}),A=Object(i.a)(P,2),B=A[0],F=A[1];Object(c.useEffect)((function(){j().then((function(e){return L(e)}))}),[]);var I=function(e){switch(e.target.name){case"name":r(e.target.value);break;case"phone":d(e.target.value);break;case"keyword":g(e.target.value),null!==k.length?D(!0):D(!1)}},T=function(e,n){F({message:e,type:n}),setTimeout((function(){F({})}),5e3)},q=C?J.filter((function(e){return e.name.toLowerCase().includes(k.toLowerCase())})):J;return Object(l.jsxs)("div",{children:[Object(l.jsx)(x,{obj:B}),Object(l.jsx)("h2",{children:"Phonebook"}),Object(l.jsx)(O,{kw:k,action:I}),Object(l.jsx)("h3",{children:"New person"}),Object(l.jsx)(m,{name:t,phone:s,action:I,onSubmit:function(e){e.preventDefault();var n={name:t,phone:s};if(""!==t&&""!==s){var c=J.find((function(e){return e.name===n.name}));if(c){if(window.confirm("".concat(t," is already added to phonebook, replace the old number with a new one?"))){var a=Object(o.a)(Object(o.a)({},c),{},{phone:s});f(c.id,a).then((function(e){L(J.map((function(n){return n.id!==a.id?n:e}))),T("".concat(t,"'s phone number have been updated to the server"),"notification")})).catch((function(e){T("".concat(t," was already removed from server"),"error"),L(J.filter((function(e){return e.id!==c.id})))}))}r(""),d("")}else h(n).then((function(e){L(J.concat(e)),T("".concat(t," have been added to the server"),"notification"),r(""),d("")})).catch((function(e){T(e.response.data.error,"error")}))}}}),Object(l.jsx)("h3",{children:"Numbers"}),Object(l.jsx)(v,{arr:q,handleDelete:function(e){var n=J.find((function(n){return n.id===e}));window.confirm("Delete ".concat(n.name,"?"))&&b(e).then((function(){L(J.filter((function(n){return n.id!==e}))),T("Delete ".concat(t," successfully!"),"notification")})).catch((function(){L(J.filter((function(n){return n.id!==e}))),T("".concat(n.name," have been removed"),"error")}))}})]})};t(41);a.a.render(Object(l.jsx)(w,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.08cc1532.chunk.js.map